!function(o){window._gtm_templates=window._gtm_templates||{tools:{}},window._gtm_templates.tools.buildQuery=function(t){if("string"==typeof t)return t;var e=[];for(var a in t)t.hasOwnProperty(a)&&e.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));return e.join("&")},o(".filter").on("click",function(){var a=o("[data-filter-tag-type]:checked").map(function(){return o(this).data("filterTagType")}).get(),i=o("[data-filter-tag-category]:checked").map(function(){return o(this).data("filterTagCategory")}).get();0<i.length||0<a.length?o(".card[data-product-type]").each(function(){var t=o(this).data("productType").toLowerCase(),e=o(this).data("productCategory");-1<i.indexOf(e)&&-1<a.indexOf(t)?o(this).show():o(this).hide()}):o(".card[data-product-type]").show(),o(".results-count").text(o("div.card[data-eec-action]:visible").length)}),o("#sortFilter").on("changed.bs.select",function(){var t=JSON.parse(JSON.stringify(window.dataLayer[0].page.filters)),e=o("option:selected",this).data("filterSort");t.sort=e||"views",location.href="/?"+window._gtm_templates.tools.buildQuery(t)}),o("#categoryFilter").on("changed.bs.select",function(){var t=JSON.parse(JSON.stringify(window.dataLayer[0].page.filters)),e=o("#categoryFilter option:selected").map(function(){return o(this).data("filterCategory")}).get().join(",");-1<t.categories.indexOf("all")&&t.categories.splice(t.categories.indexOf("all")),t.categories=e||"all",location.href="/?"+window._gtm_templates.tools.buildQuery(t)}),o("#tagTypeFilter").on("changed.bs.select",function(){var t=JSON.parse(JSON.stringify(window.dataLayer[0].page.filters));-1<t.templateTypes.indexOf("all")&&t.templateTypes.splice(t.templateTypes.indexOf("all"));var e=o("#tagTypeFilter option:selected").map(function(){return o(this).data("filterTagType")}).get().join(",");t.templateTypes=e||"all",location.href="/?"+window._gtm_templates.tools.buildQuery(t)})}(window.jQuery);