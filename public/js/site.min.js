!function(r){var t=location.pathname.split("/");"custom template page"===window.dataLayer[0].page.type&&3===t.length&&(t.push(window.dataLayer[0].template.slug),window.history.replaceState({},document.title,t.join("/"))),r(".filter").on("click",function(){var a=r("[data-filter-tag-type]:checked").map(function(){return r(this).data("filterTagType")}).get(),n=r("[data-filter-tag-category]:checked").map(function(){return r(this).data("filterTagCategory")}).get();0<n.length||0<a.length?r(".card[data-product-type]").each(function(){var t=r(this).data("productType").toLowerCase(),e=r(this).data("productCategory");-1<n.indexOf(e)&&-1<a.indexOf(t)?r(this).show():r(this).hide()}):r(".card[data-product-type]").show(),r(".results-count").text(r("div.card[data-eec-action]:visible").length)}),r("#sortFilter").on("changed.bs.select",function(){var t=JSON.parse(JSON.stringify(window.dataLayer[0].page.filters)),e=r("option:selected",this).data("filterSort");t.sort=e||"all",location.href="/?"+function(t){if("string"==typeof t)return t;var e=[];for(var a in t)t.hasOwnProperty(a)&&e.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));return e.join("&")}(t)}),r("#categoryFilter").on("changed.bs.select",function(){var t=JSON.parse(JSON.stringify(window.dataLayer[0].page.filters)),e=r("#categoryFilter option:selected").map(function(){return r(this).data("filterCategory")}).get().join(",");-1<t.categories.indexOf("all")&&t.categories.splice(t.categories.indexOf("all")),t.categories=e||"all",location.href="/?"+function(t){if("string"==typeof t)return t;var e=[];for(var a in t)t.hasOwnProperty(a)&&e.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));return e.join("&")}(t)}),r("#tagTypeFilter").on("changed.bs.select",function(){var t=JSON.parse(JSON.stringify(window.dataLayer[0].page.filters));-1<t.tagTypes.indexOf("all")&&t.tagTypes.splice(t.tagTypes.indexOf("all"));var e=r("#tagTypeFilter option:selected").map(function(){return r(this).data("filterTagType")}).get().join(",");t.tagTypes=e||"all",location.href="/?"+function(t){if("string"==typeof t)return t;var e=[];for(var a in t)t.hasOwnProperty(a)&&e.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));return e.join("&")}(t)})}(window.jQuery);