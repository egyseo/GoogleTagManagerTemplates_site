!function(o){window._gtm_templates=window._gtm_templates||{tools:{}},window._gtm_templates.tools.buildQuery=function(e){if("string"==typeof e)return e;var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")},o(".filter").on("click",function(){var a=o("[data-filter-tag-type]:checked").map(function(){return o(this).data("filterTagType")}).get(),i=o("[data-filter-tag-category]:checked").map(function(){return o(this).data("filterTagCategory")}).get();0<i.length||0<a.length?o(".card[data-product-type]").each(function(){var e=o(this).data("productType").toLowerCase(),t=o(this).data("productCategory");-1<i.indexOf(t)&&-1<a.indexOf(e)?o(this).show():o(this).hide()}):o(".card[data-product-type]").show(),o(".results-count").text(o("div.card[data-eec-action]:visible").length)}),o("#sortFilter").on("changed.bs.select",function(){var e="home page"===window.dataLayer[0].page.type?"/?":"/search?",t=JSON.parse(JSON.stringify(window.dataLayer[0].page.filters)),a=o("option:selected",this).data("filterSort");t.sort=a||"views",location.href=e+window._gtm_templates.tools.buildQuery(t)}),o("#categoryFilter").on("changed.bs.select",function(){var e="home page"===window.dataLayer[0].page.type?"/?":"/search?",t=JSON.parse(JSON.stringify(window.dataLayer[0].page.filters)),a=o("#categoryFilter option:selected").map(function(){return o(this).data("filterCategory")}).get().join(",");-1<t.categories.indexOf("all")&&t.categories.splice(t.categories.indexOf("all")),t.categories=a||"all",location.href=e+window._gtm_templates.tools.buildQuery(t)}),o("#tagTypeFilter").on("changed.bs.select",function(){var e="home page"===window.dataLayer[0].page.type?"/?":"/search?",t=JSON.parse(JSON.stringify(window.dataLayer[0].page.filters));-1<t.templateTypes.indexOf("all")&&t.templateTypes.splice(t.templateTypes.indexOf("all"));var a=o("#tagTypeFilter option:selected").map(function(){return o(this).data("filterTagType")}).get().join(",");t.templateTypes=a||"all",location.href=e+window._gtm_templates.tools.buildQuery(t)}),o("#searchGo").on("mousedown",function(){var e="home page"===window.dataLayer[0].page.type?"/?":"/search?",t=JSON.parse(JSON.stringify(window.dataLayer[0].page.filters));-1<t.templateTypes.indexOf("all")&&t.templateTypes.splice(t.templateTypes.indexOf("all"));var a=o("#tagTypeFilter option:selected").map(function(){return o(this).data("filterTagType")}).get().join(",");t.templateTypes=a||"all",t.query=[o("#query").val()],location.href=e+window._gtm_templates.tools.buildQuery(t)})}(window.jQuery);