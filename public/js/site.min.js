!function(o){var e=location.pathname.split("/");"custom template page"===window.dataLayer[0].page.type&&3===e.length&&(e.push(window.dataLayer[0].template.slug),window.history.replaceState({},document.title,e.join("/"))),o(".filter").on("click",function(){var a=o("[data-filter-tag-type]:checked").map(function(){return o(this).data("filterTagType")}).get(),n=o("[data-filter-tag-category]:checked").map(function(){return o(this).data("filterTagCategory")}).get();0<n.length||0<a.length?o(".card[data-product-type]").each(function(){var e=o(this).data("productType").toLowerCase(),t=o(this).data("productCategory");-1<n.indexOf(t)&&-1<a.indexOf(e)?o(this).show():o(this).hide()}):o(".card[data-product-type]").show(),o(".results-count").text(o("div.card[data-eec-action]:visible").length)}),o("#sortFilter").on("changed.bs.select",function(){if(window.google_tag_manager){var e=JSON.parse(JSON.stringify(window.google_tag_manager["GTM-NHFW9Q3"].dataLayer.get("page.filters"))),t=o("option:selected",this).data("filterSort");e.sort=t||"all",location.href="/?"+function(e){if("string"==typeof e)return e;var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")}(e)}}),o("#categoryFilter").on("changed.bs.select",function(){if(window.google_tag_manager){var e=JSON.parse(JSON.stringify(window.google_tag_manager["GTM-NHFW9Q3"].dataLayer.get("page.filters"))),t=o("#categoryFilter option:selected").map(function(){return o(this).data("filterCategory")}).get().join(",");-1<e.categories.indexOf("all")&&e.categories.splice(e.categories.indexOf("all")),e.categories=t||"all",location.href="/?"+function(e){if("string"==typeof e)return e;var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")}(e)}}),o("#tagTypeFilter").on("changed.bs.select",function(){if(window.google_tag_manager){var e=JSON.parse(JSON.stringify(window.google_tag_manager["GTM-NHFW9Q3"].dataLayer.get("page.filters")));-1<e.tagTypes.indexOf("all")&&e.tagTypes.splice(e.tagTypes.indexOf("all"));var t=o("#tagTypeFilter option:selected").map(function(){return o(this).data("filterTagType")}).get().join(",");e.tagTypes=t||"all",location.href="/?"+function(e){if("string"==typeof e)return e;var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")}(e)}})}(window.jQuery);